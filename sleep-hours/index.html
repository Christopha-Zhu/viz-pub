<!DOCTYPE html>
<style>

path, line {
  fill: none;
}

</style>
<body>
<svg id="mainimg" width=600 height=600></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script>

function xpos(time) {
  return Math.sin(2 * Math.PI * time/24);
}

function ypos(time) {
  return -Math.cos(2 * Math.PI * time/24); 
}


d3.csv("data.csv", function(error, data) {
  if (error) throw error;

  data.forEach(function(d, i) {
    d.start = +d.start;
    d.end = +d.end;
    d.n = +d.n;
  });

  console.log(data);


  svg = d3.select("#mainimg")
      .attr("viewBox", "-1, -1, 2, 2")
    .append("g");

  svg.selectAll("path")
    .data(data)
    .enter()
    .filter(function(d) {return d.n > 0.1; })
    .append("path")
      .attr("d", function(d) { return "M " + xpos(d.start) + " "  + ypos(d.start) + " " +
                                      "Q 0 0 " + xpos(d.end) + " " + ypos(d.end); })
      .attr("stroke", function(d) { return d3.interpolateYlGnBu(d.n); } )
      .attr("stroke-width", function(d) {return 0.01 * d.n});



  
});


</script>
